# COBOL Modernization Bundle Configuration
# Override these values during installation with --set or -f custom-values.yaml

# Model reference for agents
# You must create a Model resource before installing this bundle
modelRef:
  name: default

# Agents configuration (matching LegacyX Groups)
agents:
  # Audio Transcription And Documentation
  audioTranscriber:
    enabled: true
    name: audio-transcriber

  # Cobol Code Documentation
  cobolCodeDocumenter:
    enabled: true
    name: cobol-code-documenter

  # Cobol Codebase Summary
  cobolCodebaseSummarizer:
    enabled: true
    name: cobol-codebase-summarizer

  # Cobol Pseudocode Documentation
  cobolPseudocodeDocumenter:
    enabled: true
    name: cobol-pseudocode-documenter

  # Diagram Creation
  diagramCreator:
    enabled: true
    name: diagram-creator

  # Pseudo Python Modernizer
  pseudoPythonModernizer:
    enabled: true
    name: pseudo-python-modernizer

# Labels to apply to all resources
commonLabels:
  bundle: cobol-modernization
  managed-by: helm

# Argo Workflows integration
argoWorkflows:
  rbac:
    enabled: true
  workflowTemplate:
    enabled: true

# Speech MCP Server - local audio transcription via Whisper
speech-mcp-server:
  enabled: true
  whisperModel: "tiny"
  image:
    repository: speech-mcp-server
    tag: latest
    pullPolicy: IfNotPresent
  dataVolume:
    claimName: "file-gateway-storage"
  resources:
    limits:
      cpu: "4"
      memory: 4Gi
    requests:
      cpu: 500m
      memory: 1Gi

# Data seeder - uploads sample data to file-gateway after install
dataSeeder:
  enabled: true
  image:
    repository: cobol-demo-data-seeder
    tag: latest
    pullPolicy: IfNotPresent

# Demo discovery labels applied to the namespace
demo:
  name: "COBOL Modernization"
  description: "COBOL modernization with agents for reverse engineering, pseudocode generation, Python conversion, and documentation"

# File Gateway integration for file-based inputs/outputs
file-gateway:
  enabled: true
  storage:
    pvcName: "file-gateway-storage"  # Fixed name to survive helm upgrades
  filesystemMcp:
    enabled: true
