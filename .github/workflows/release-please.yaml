name: Release Please

on:
  push:
    branches:
      - main

env:
  ACT: false # Default value for ACT

permissions:
  contents: write
  pull-requests: write

jobs:
  release-please: 
    runs-on: ubuntu-24.04
    outputs:
      released: ${{ steps.release-please.outputs.release_created }}
      tag: ${{ steps.release-please.outputs.tag_name }}
    steps:
      - name: Skip Release (Running Locally)
        if: ${{ env.ACT }}
        run: |
          echo "ℹ️  Skipping release when running locally with 'act'"
          echo "   Release creation requires GitHub tokens that are not available locally"
      - name: Run Release Please
        if: ${{ !env.ACT && github.ref == 'refs/heads/main' }}
        uses: googleapis/release-please-action@v4
        id: release-please
        with:
          config-file: .github/release-please-config.json
          manifest-file: .github/release-please-manifest.json
